# catsandra

Cassandra client for Scala using Cats Effect.

This is a high-level Scala client for **Cassandra** which uses **Cats Effect**. It also learns a thing or two from *Clojure*.

> 
- Q1. So why is it high-level?
- *A1. Because in only three steps, you can do CRUD operations on data in your Cassandra keyspaces.*

> 
- Q2. And what does it learn from Clojure?
- *A2. Using generic data structures like Maps.*

>
- Q3. But that's not the Scala way?
- *A3. Agreed, but it takes just one more (fourth) step to convert a map into your case class.*

>
- Q4. Wow, neat, so how to do that?
- *A4. Here you go...*

>

## Usage

**1.** There is an `application.conf` file in `/config` folder with the following structure, and you need to supply 
appropriate values.

```
{
  host :     "localhost"
  port :     9042
  datacenter: ""
  username : ""
  password : ""
  keyspace : ""
}
```

**2.** Decide whether you want your data as -
 - (a) `Map[String, Any]` - where obviously, the column *names* are (String) *keys* and column *values* are (Any) *values*
 - (b) `Map[String, TypeVal]` - where obviously, the column *names* are (String) *keys* and column *values* are (TypeVal) *values*
    - here, TypeVal is `case class TypeVal(dataType: String, value: Any)`
 - (c) `A Case class`

Based on (a), (b) or (c) above, declare a `PlayerRepository` (for instance, if your **keyspace** has a table called **players**) 
which extends -
 - (a) `AbstractGenericRepository[TPK]`  
 - (b) `AbstractGenericTypeValRepository[TPK]`
 - (c) `AbstractGenericTypedRepository[T <: Product, TPK]`

 where `TPK` denotes the type of the partition key, and `T <: Product` denotes your case class.

 > Note: Every case class extends a Product.
 
 Then, you just have to override three fields -
  - `tableName` which denotes the name of the table
  - `pkColumnName` which denotes the name of the partition key
  - `isPKAutoGenerated` which specifies whether the value of the partition key is auto-generated (or not)

**3.** Now you have `getAll, getByPK, getCount, getByQuery, insert, update & delete` methods on your playerRepository
instance.
